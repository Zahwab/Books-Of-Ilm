<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Books of 'Ilm – For The Ummah –</title>
  <!-- Organization schema (static) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "Books of 'Ilm",
    "url": "https://booksofilm.netlify.app/",
    "logo": "https://lailahaillallah.netlify.app/img/booksofilm.png",
    "description": "Books Of 'Ilm built by a servant of Allah (ﷻ) is a global Islamic platform that connects Muslims through shared saheeh evidences and texts in pdf format written by Major Scholars of the Ummah",
    "founder": {
      "@type": "Person",
      "name": "Zahidur Rahman",
      "sameAs": [
        "https://github.com/Zahwab"
      ]
    },
    "contactPoint": {
      "@type": "ContactPoint",
      "contactType": "Customer Support",
      "telephone": "+91-8145557632",
      "email": "servantofallahswt118@gmail.com",
      "areaServed": "IN",
      "availableLanguage": ["English", "Bengali"]
    },
    "address": {
      "@type": "PostalAddress",
      "addressLocality": "Berhampore",
      "addressRegion": "WB",
      "postalCode": "742101",
      "addressCountry": "IN"
    },
    "foundingDate": "2024-10-19",
    "keywords": "Zahidur Rahman, Books of 'Ilm, global ummah, faith, spirituality, knowledge sharing, salafi, ahle hadees, manhaj as salaf, authentic hadeeth, books of knowledge"
  }
  </script>
  <script type="application/ld+json" id="ld-json"></script>
  <script>
    (function () {
      fetch('public/books.json')
        .then(res => res.json())
        .then(books => {
          const structuredData = {
            "@context": "https://schema.org",
            "@type": "ItemList",
            "itemListElement": books.map((book, i) => {
              // turn "the-great-gatsby" into "The Great Gatsby"
              const displayName = book.name
                .split('-')
                .map(word => word.charAt(0).toUpperCase() + word.slice(1))
                .join(' ');

              return {
                "@type": "ListItem",
                "position": i + 1,
                "item": {
                  "@type": "Book",
                  "name": displayName,
                  "url": `${location.origin}/${encodeURIComponent(book.file)}`,
                  "image": `${location.origin}/${encodeURIComponent(book.thumb)}`,
                  "bookFormat": "https://schema.org/EBook",
                  "contentSize": book.size
                }
              };
            })
          };

          document.getElementById('ld-json')
            .textContent = JSON.stringify(structuredData, null, 2);
        })
        .catch(err => console.error('Failed loading books.json:', err));
    })();
  </script>
  <style>
    /* 0. IMPORT & ROOT VARIABLES */

    html {
      scroll-padding-top: 100px;
      scroll-behavior: smooth;
      -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
    }

    #preloader {
      background: #000000 url(img/request.gif) no-repeat center center;
      background-size: 30%;
      height: 100vh;
      width: 100%;
      position: fixed;
      z-index: 9999;
    }

    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

    :root {
      --bg: #fafafa;
      --fg: #1a1a1a;
      --muted: #4a4a4a;
      --surface: #ffffff;
      --border: #d8d8d8;
      --primary: #00796b;
      --accent: #ff8f00;
      --alt: #f1fcfb;
      --overlay-bg: rgba(0, 0, 0, 0.8);
      --loader-bg: hsla(170, 50%, 50%, 0.3);
      --loader-edge-1: hsla(170, 50%, 50%, 0.7);
      --loader-edge-2: hsla(170, 50%, 50%, 0.5);
    }

    body.dark {
      --bg: #121212;
      --fg: #eaeaea;
      --muted: #b0b0b0;
      --surface: #1e1e1e;
      --border: #2c2c2c;
      --primary: #26c6da;
      --accent: #ffb956;
      --alt: #181818;
      --overlay-bg: rgba(0, 0, 0, 0.85);
      /* deeper backdrop */
      --loader-bg: hsla(170, 70%, 40%, 0.4);
      --loader-edge-1: hsla(170, 70%, 50%, 0.8);
      --loader-edge-2: hsla(170, 70%, 45%, 0.6);
    }

    /* 1. RESET & BASE */
    *,
    *::before,
    *::after {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: var(--bg);
      color: var(--fg);
      font: clamp(16px, 1.8vw, 18px)/1.6 'Inter', sans-serif;
      letter-spacing: .3px;
      transition: background .3s, color .3s;
      overflow-x: hidden;
    }

    ::selection {
      background: var(--accent);
      color: var(--surface);
    }

    h1,
    h2,
    h3,
    h4 {
      color: var(--fg);
      font-weight: 600;
      letter-spacing: .5px;
      margin-bottom: .5em;
    }

    h1 {
      font-size: 2.8rem;
    }

    h2 {
      font-size: 2.2rem;
    }

    h3 {
      font-size: 1.6rem;
    }

    p,
    ul,
    ol,
    li,
    label {
      margin-bottom: 1em;
      color: var(--fg);
    }

    a {
      color: var(--primary);
      text-decoration: none;
      font-weight: 500;
      transition: color .2s;
    }

    a:hover,
    a:focus {
      color: var(--accent);
      outline: 2px dotted var(--accent);
    }

    /* 2. LAYOUT CONTAINERS */
    .container {
      max-width: 1200px;
      width: 90%;
      margin: 0 auto;
      padding: 3em 0;
      border-radius: 12px;
    }

    .alt {
      background: var(--alt);
      border-radius: 12px;
    }

    /* 3. NAVBAR */
    .sticky {
      position: sticky;
      top: 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: rgba(255, 255, 255, .95);
      backdrop-filter: blur(6px);
      padding: 1em 2%;
      box-shadow: 0 2px 6px rgba(0, 0, 0, .05);
      z-index: 1000;
      border-radius: 0 0 12px 12px;
    }

    body.dark .sticky {
      background: rgba(18, 18, 18, .95);
    }

    .logo {
      font-size: 1.5em;
      color: var(--primary);
      font-weight: 600;
    }

    /* Utility Header - Base Styling */
    .utility {
      display: flex;
      justify-content: flex-end;
      align-items: center;
      gap: 0.5rem;
      padding: 0.5rem 1rem;
      z-index: 1001;
    }

    /* Desktop Menu */
    .menu {
      list-style: none;
      display: flex;
      gap: 1.5em;
      z-index: 1100;
    }

    .menu a {
      padding: .2em;
      color: var(--fg);
    }

    .menu a:hover,
    .menu a:focus {
      color: var(--primary);
      outline: 2px dotted var(--primary);
    }

    .has-sub {
      position: relative;
    }

    .submenu {
      display: none;
      position: absolute;
      top: 100%;
      left: 0;
      background: var(--surface);
      border: 1px solid var(--border);
      list-style: none;
      padding: .5em 0;
      border-radius: 0 0 8px 8px;
    }

    .has-sub:hover .submenu,
    .has-sub:focus-within .submenu {
      display: block;
    }

    /* 4. HAMBURGER MENU (ACCESSIBLE BUTTON) */
    .hamburger {
      display: none;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      width: 36px;
      height: 36px;
      padding: 6px;
      border: none;
      background: rgba(255, 255, 255, 0.85);
      border-radius: 8px;
      cursor: pointer;
      transition: transform 0.3s ease, background 0.3s ease;
      position: absolute;
      top: 1rem;
      right: 1rem;
      z-index: 1200;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
      backdrop-filter: blur(6px);
    }

    .hamburger:active {
      transform: scale(0.95);
    }

    .hamburger span {
      display: block;
      width: 100%;
      height: 5px;
      background: #4af;
      border: 2px solid #333;
      box-shadow: 2px 2px 0px #111;
      margin: 4px 0;
      transition: transform 0.4s ease, opacity 0.3s ease;
      animation: pixelBounce 1.5s infinite ease-in-out;
    }

    .hamburger.active span:nth-child(1) {
      transform: translateY(9px) rotate(45deg);
    }

    .hamburger.active span:nth-child(2) {
      opacity: 0;
    }

    .hamburger.active span:nth-child(3) {
      transform: translateY(-9px) rotate(-45deg);
    }

    body.dark .hamburger span {
      background: var(--accent);
      border-color: var(--surface);
      box-shadow: 2px 2px 4px rgba(255, 143, 0, 0.4);
    }

    body.dark .hamburger:hover {
      background: rgba(30, 30, 30, 1);
      box-shadow: 0 0 16px rgba(255, 143, 0, 0.6);
    }

    /* Pixel Bounce Animation */
    @keyframes pixelBounce {

      0%,
      100% {
        transform: translateY(0);
      }

      50% {
        transform: translateY(-3px);
      }
    }

    /* 5. HERO & CTA */
    .hero {
      position: relative;
      background: linear-gradient(135deg, var(--primary), var(--accent));
      color: var(--surface);
      height: 60vh;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 0 1em;
      border-radius: 12px;
    }

    .hero h1 {
      font-size: 3rem;
      margin-bottom: .5em;
    }

    .hero p {
      font-size: 1.2rem;
    }

    .btn-cta {
      margin-top: 1em;
      background: var(--surface);
      color: var(--primary);
      padding: .75em 1.5em;
      border-radius: 10px;
      font-weight: 600;
      position: relative;
      overflow: hidden;
      transition: transform .2s, box-shadow .2s;
    }

    .btn-cta:hover,
    .btn-cta:focus {
      transform: scale(1.05);
      box-shadow: 0 6px 16px rgba(0, 0, 0, .15);
      outline: 2px solid var(--accent);
    }

    /* 6. SECTION HEADERS */

    section {
      scroll-margin-top: 100px;
    }

    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1em;
    }

    .section-header h2 {
      position: relative;
      font-size: 2rem;
      font-weight: 600;
    }

    .section-header h2::after {
      content: '';
      position: absolute;
      left: 0;
      bottom: -6px;
      width: 50px;
      height: 3px;
      background: var(--accent);
      transition: width .3s;
    }

    .section-header h2:hover::after,
    .section-header h2:focus-within::after {
      width: 100px;
    }

    /* 7. DARK MODE TOGGLE BUTTON */
    #darkToggle {
      background: var(--surface);
      color: var(--primary);
      font-size: 1.2rem;
      border: none;
      border-radius: 8px;
      padding: .6em;
      cursor: pointer;
      transition: background .3s ease, color .3s ease, transform .2s ease, box-shadow .3s ease;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    #darkToggle:hover,
    #darkToggle:focus {
      background: var(--accent);
      color: var(--surface);
      transform: scale(1.1);
      box-shadow: 0 0 12px rgba(255, 143, 0, 0.5);
      outline: 2px solid var(--accent);
    }

    body.dark #darkToggle {
      background: var(--surface);
      color: var(--accent);
      box-shadow: 0 0 10px rgba(255, 143, 0, 0.3);
    }

    /* 18. FLOATING BUTTONS */
    .floating-top,
    .floating-feedback {
      position: fixed;
      bottom: 2rem;
      width: 3rem;
      height: 3rem;
      font-size: 1.4rem;
      background: var(--surface);
      color: var(--primary);
      border: none;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      cursor: pointer;
      transition: background 0.3s ease, transform 0.2s ease, box-shadow 0.2s ease;
      display: flex;
      /* keep it visible */
      align-items: center;
      justify-content: center;
      z-index: 3000;
    }

    /* Positioning */
    .floating-top {
      right: 2rem;
      display: none;
      /* Hide until scroll shows it */
    }

    .floating-feedback {
      right: 7rem;
    }

    /* Hover / Focus Effects */
    .floating-top:hover,
    .floating-feedback:hover,
    .floating-top:focus,
    .floating-feedback:focus {
      background: var(--accent);
      color: var(--surface);
      transform: scale(1.1);
      box-shadow: 0 0 16px rgba(255, 143, 0, 0.5);
      outline: 2px solid var(--accent);
    }

    /* Dark mode */
    body.dark .floating-top,
    body.dark .floating-feedback {
      background: var(--surface);
      color: var(--accent);
      box-shadow: 0 0 10px rgba(255, 143, 0, 0.3);
    }

    /* ── Preview Overlay ───────────────────────────────────────────────────── */
    .thumbnail-modal {
      position: fixed;
      inset: 0;
      background: var(--overlay-bg);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 5000;
      cursor: zoom-out;
    }

    .thumbnail-modal .preview-image {
      max-width: 90vw;
      max-height: 90vh;
      border-radius: 12px;
      box-shadow: 0 0 24px rgba(0, 0, 0, 0.5);
      transform: scale(1);
      transition: transform 0.3s ease;
    }

    .thumbnail-modal .close-preview {
      position: absolute;
      top: 1rem;
      right: 1rem;
      font-size: 2.5rem;
      color: var(--surface);
      /* default */
      cursor: pointer;
      user-select: none;
      transition: color 0.2s ease, text-shadow 0.3s ease;
      text-shadow: 0 0 8px rgba(255, 255, 255, 0.4);
      /* better visibility */
    }

    .thumbnail-modal .close-preview:hover {
      color: var(--accent);
      text-shadow: 0 0 16px rgba(255, 143, 0, 0.9);
    }

    /* In dark mode, make it vivid */
    body.dark .thumbnail-modal .close-preview {
      color: var(--accent);
      /* orange highlight */
      text-shadow: 0 0 12px rgba(255, 143, 0, 0.6);
    }

    body.dark .thumbnail-modal .preview-image {
      box-shadow: 0 0 32px rgba(255, 143, 0, 0.4);
      border: 2px solid var(--accent);
    }

    .thumbnail-wrapper {
      position: relative;
      width: 100%;
      height: 160px;
      overflow: hidden;
      border-radius: 8px;
    }

    .loader-container {
      display: flex;
      justify-content: center;
      align-items: center;
      perspective: 200px;
      width: 100%;
      height: 100%;
      position: absolute;
      inset: 0;
      background: transparent;
      z-index: 2;
    }

    .card-thumbnail {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 8px;
      transition: opacity 0.4s ease;
      position: relative;
      z-index: 1;
      display: block;
    }

    /* Box Loader Styles */
    .box {
      --size: 12vmin;
      width: var(--size);
      height: var(--size);
      background-color: var(--loader-bg);
      transform: rotateZ(30deg) skew(-35deg);
      position: relative;
      animation: animate 800ms infinite ease-in-out both alternate;
    }

    .box:nth-child(1) {
      animation-delay: 0.1s;
    }

    .box:nth-child(2) {
      animation-delay: 0.2s;
    }

    .box:nth-child(3) {
      animation-delay: 0.3s;
    }

    .box:nth-child(4) {
      animation-delay: 0.4s;
    }

    .box::before,
    .box::after {
      content: "";
      width: inherit;
      height: 5px;
      position: absolute;
      left: 0;
      bottom: 0;
    }

    .box::before {
      transform-origin: left bottom;
      background-color: var(--loader-edge-1);
      transform: translateX(var(--size)) rotateZ(180deg) skew(45deg);
    }

    .box::after {
      transform-origin: right bottom;
      background-color: var(--loader-edge-2);
      transform: translateX(0) rotateZ(90deg) skew(-45deg);
    }

    @keyframes animate {
      from {
        transform: translateY(0) rotateZ(30deg) skew(-35deg);
      }

      to {
        transform: translateY(calc(-1.2 * var(--size))) rotateZ(30deg) skew(-35deg);
      }
    }

    /* FORM CONTAINER */
    #cover-form {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 2em;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      max-width: 600px;
      margin: 2em auto;
    }

    #cover-form:hover,
    #cover-form:focus-within {
      transform: translateY(-4px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
    }

    /* FORM HEADLINE */
    #cover-form h2 {
      text-align: center;
      font-size: 2rem;
      margin-bottom: 1em;
      color: var(--fg);
    }

    /* FORM WRAPPER */
    #cover-form form {
      display: flex;
      flex-direction: column;
      gap: 1.5em;
    }

    /* FIELD GROUP */
    .field-group {
      position: relative;
      width: 100%;
      margin-bottom: 1em;
    }

    /* INPUTS / SELECT / TEXTAREA */
    .field-group input,
    .field-group select,
    .field-group textarea {
      width: 100%;
      padding: 1.2em 1em;
      min-height: 44px;
      border: 1px solid var(--border);
      border-radius: 10px;
      background: var(--alt);
      font-size: 1rem;
      color: var(--fg);
      transition: border-color 0.3s ease, background 0.3s ease, box-shadow 0.3s ease;
    }

    .field-group input:focus,
    .field-group select:focus,
    .field-group textarea:focus {
      border-color: var(--accent);
      background: var(--surface);
      outline: none;
      box-shadow: 0 0 0 3px rgba(255, 143, 0, 0.2);
    }

    /* FLOATING LABEL */
    .field-group label {
      position: absolute;
      top: 1.4em;
      left: 1em;
      padding: 0 0.5em;
      font-size: 0.95rem;
      line-height: 1.4;
      color: var(--muted);
      background: var(--alt);
      pointer-events: none;
      transition: transform 0.3s ease, font-size 0.3s ease, color 0.3s ease, background 0.3s ease;
    }

    .field-group input:focus+label,
    .field-group textarea:focus+label,
    .field-group select:focus+label,
    .field-group input:not(:placeholder-shown)+label,
    .field-group textarea:not(:placeholder-shown)+label,
    .field-group select:not([value=""])+label {
      transform: translateY(-1.8em) scale(0.9);
      font-size: 0.85rem;
      color: var(--accent);
      background: var(--surface);
    }

    /* SUBMIT BUTTON + RIPPLE */
    #cover-form button[type="submit"] {
      background: var(--primary);
      color: var(--surface);
      padding: 0.9em 1.4em;
      border: none;
      border-radius: 10px;
      font-weight: 600;
      cursor: pointer;
      position: relative;
      overflow: hidden;
      transition: background 0.3s ease, transform 0.2s ease;
    }

    #cover-form button[type="submit"]:hover {
      background: var(--accent);
      transform: scale(1.05);
    }

    #cover-form button[type="submit"]::after {
      content: "";
      position: absolute;
      background: rgba(255, 255, 255, 0.5);
      width: 100px;
      height: 100px;
      border-radius: 50%;
      pointer-events: none;
      transform: scale(0);
      opacity: 0;
      animation: ripple 0.6s ease-out;
    }

    @keyframes ripple {
      to {
        transform: scale(4);
        opacity: 0;
      }
    }

    /* DARK MODE */
    body.dark #cover-form {
      background: var(--alt);
    }

    body.dark #cover-form input,
    body.dark #cover-form select,
    body.dark #cover-form textarea {
      background: var(--surface);
      color: var(--fg);
    }

    body.dark #cover-form label {
      background: var(--surface);
    }

    /* 9. GRIDS & CARDS */
    .grid,
    .donate-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 1.5em;
    }

    .card {
      max-width: 300px;
      width: 100%;
      margin: auto;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 1.5em;
      box-shadow: 0 4px 12px rgba(0, 0, 0, .05);
      opacity: 0;
      transform: translateY(20px);
      transition: opacity .6s ease-out, transform .6s ease-out, box-shadow .2s ease;
    }

    .card.visible {
      opacity: 1;
      transform: translateY(0);
    }

    .card:hover,
    .card:focus-within {
      transform: translateY(-5px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, .1);
    }

    .card img {
      max-width: 100%;
      height: auto;
      border-radius: 8px;
      margin-bottom: 1em;
    }

    .card h3 {
      margin-bottom: .5em;
      color: var(--fg);
      font-size: 1.2rem;
    }

    .card p {
      font-size: .95rem;
    }

    .card .btn {
      display: inline-block;
      margin-top: 1em;
      background: var(--primary);
      color: var(--surface);
      padding: .6em 1.2em;
      border-radius: 10px;
      font-weight: 500;
      transition: background .2s, box-shadow .2s;
    }

    .card .btn:hover,
    .card .btn:focus {
      background: var(--accent);
      box-shadow: 0 4px 12px rgba(0, 0, 0, .1);
      outline: 2px solid var(--accent);
    }

    #jsonBookGrid {
      display: grid;
      gap: 1.2rem;
      justify-content: center;
      grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
      padding: 1.5rem;
    }

    #refreshRandom {
      background: var(--primary);
      color: var(--surface);
      padding: .4em .7em;
      border-radius: 10px;
      font-size: 1.2rem;
      border: none;
      cursor: pointer;
      transition: transform .2s ease, box-shadow .3s ease, background .2s ease;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    #refreshRandom:hover,
    #refreshRandom:focus {
      background: var(--accent);
      transform: rotate(-20deg) scale(1.1);
      box-shadow: 0 0 15px rgba(255, 143, 0, 0.5);
      outline: 2px solid var(--accent);
    }

    #refreshRandom:active {
      transform: scale(0.95);
      box-shadow: none;
    }

    /* 11.DONATE CARDS */
    .donate-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 1.5em;
      box-shadow: 0 4px 12px rgba(0, 0, 0, .05);
      transition: transform .2s, box-shadow .2s;
    }

    .donate-card:hover,
    .donate-card:focus-within {
      transform: translateY(-5px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, .1);
    }

    .donate-card h3 {
      margin-bottom: .8em;
      color: var(--fg);
    }

    /* 12. DONATE SECTION */
    .donate-section {
      background: var(--primary);
      color: var(--surface);
      text-align: center;
      padding: 3em 0;
      border-radius: 12px;
    }

    .donate-card img.qr {
      display: block;
      margin: 1em auto;
      width: 120px;
    }

    .donate-card ul {
      list-style: none;
      padding: 0;
      color: var(--surface);
    }

    .donate-card ul li {
      margin-bottom: .5em;
      font-size: .95rem;
    }

    /* 14. MODAL */
    .modal {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, .6);
      align-items: center;
      justify-content: center;
      padding: 1em;
      z-index: 2000;
    }

    .modal-content {
      background: var(--surface);
      padding: 2em;
      border-radius: 12px;
      max-width: 400px;
      width: 100%;
      position: relative;
      color: var(--fg);
    }

    .close-btn {
      position: absolute;
      top: .5em;
      right: .5em;
      font-size: 1.5em;
      cursor: pointer;
    }

    /* 15. RIPPLE EFFECT */
    .btn {
      position: relative;
      overflow: hidden;
    }

    .btn .ripple {
      position: absolute;
      width: 80px;
      height: 80px;
      background: rgba(255, 255, 255, .4);
      border-radius: 50%;
      transform: scale(0);
      animation: ripple .6s ease-out;
    }

    @keyframes ripple {
      to {
        transform: scale(4);
        opacity: 0;
      }
    }

    /* 16. FOOTER */
    footer {
      text-align: center;
      padding: 2em 0;
      color: var(--muted);
      border-radius: 0 0 12px 12px;
    }

    /* 17. RESPONSIVE BREAKPOINTS */
    /* Ultra-small devices */
    @media (max-width: 480px) {
      .hero h1 {
        font-size: 1.8rem;
      }

      .hero p {
        font-size: 0.9rem;
      }

      .btn-cta {
        font-size: 0.9rem;
        padding: 0.5em 1em;
      }

      .section-header h2 {
        font-size: 1.5rem;
      }

      .modal-content {
        padding: 1.5em;
      }

      .card h3 {
        font-size: 1rem;
      }

      .card p {
        font-size: 0.85rem;
      }

      .utility {
        flex-direction: column;
        align-items: stretch;
      }

      #darkToggle {
        width: 100%;
        margin-bottom: 0.5rem;
      }

      .thumbnail-modal .preview-image {
        max-width: 98vw;
        max-height: 80vh;
        border-radius: 6px;
      }

      .thumbnail-modal .close-preview {
        font-size: 2rem;
        top: 0.5rem;
        right: 0.5rem;
      }
    }

    @media only screen and (max-width:524px) {
      #preloader {
        background-size: 60%;
        z-index: 9999;
      }
    }

    @media (max-width: 600px) {

      .floating-feedback,
      .floating-top {
        right: 1rem !important;
        width: 2.5rem;
        height: 2.5rem;
        font-size: 1rem;
      }

      .floating-feedback {
        bottom: 5rem !important;
      }

      .floating-top {
        bottom: 1rem !important;
      }
    }

    /* 📱 Small Screens: 2 cards */
    @media (max-width: 767px) {
      #jsonBookGrid {
        grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
        padding: 1rem;
        gap: 1rem;
      }
    }

    /* Mobile devices */
    @media (max-width: 768px) {


      .sticky {
        flex-direction: column;
        align-items: flex-start;
        position: relative;
        z-index: 999;
      }

      nav {
        width: 100%;
        position: relative;
      }

      .menu {
        display: none;
        position: fixed;
        top: 0;
        right: 0;
        width: 80%;
        height: 100vh;
        background: var(--surface);
        flex-direction: column;
        padding: 3em 1.5em;
        gap: 1.2em;
        box-shadow: -4px 0 20px rgba(0, 0, 0, 0.1);
        z-index: 2000;
        overflow-y: auto;
        transition: transform 0.3s ease-in-out;
      }

      .menu.open {
        display: flex;
        transform: translateX(0);
      }


      .hamburger {
        display: flex;
        position: absolute;
        top: 1rem;
        right: 1rem;
        z-index: 2100;
      }

      .utility {
        flex-wrap: wrap;
        justify-content: flex-start;
        margin-top: 1rem;
      }

      .donate-grid,
      .grid {
        grid-template-columns: 1fr;
      }

      .hero {
        height: auto;
        padding: 4em 1em;
      }

      .hero h1 {
        font-size: 2.2rem;
      }

      .hero p {
        font-size: 1rem;
      }

      .thumbnail-modal .preview-image {
        max-width: 95vw;
        max-height: 85vh;
        border-radius: 8px;
      }
    }

    /* 💻 Medium Screens: 3 cards */
    @media (min-width: 768px) and (max-width: 1023px) {
      #jsonBookGrid {
        grid-template-columns: repeat(3, 1fr);
      }
    }

    /* Tablet / small laptops */
    @media (min-width: 769px) and (max-width: 1024px) {

      .grid,
      .donate-grid {
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      }

      .section-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.5em;
      }

      .modal-content {
        max-width: 360px;
      }
    }

    /* 🖥 Full Screens: 4 cards */
    @media (min-width: 1024px) and (max-width: 1399px) {
      #jsonBookGrid {
        grid-template-columns: repeat(4, 1fr);
      }
    }

    /* Widescreen / 4K */
    @media (min-width: 1440px) {
      .container {
        max-width: 1400px;
      }

      .hero h1 {
        font-size: 3.4rem;
      }

      .hero p {
        font-size: 1.3rem;
      }

      .btn-cta {
        font-size: 1.1rem;
      }

      .grid,
      .donate-grid {
        grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      }

      #jsonBookGrid {
        grid-template-columns: repeat(5, 1fr);
      }
    }
  </style>



</head>

<body>
  <div id="preloader"></div>
  <!-- Sticky Navbar -->
  <header class="sticky">
    <div class="logo">Books of 'Ilm</div>

    <nav>
      <ul class="menu">
        <li><a href="#hero">Home</a></li>
        <!-- Navbar Menu Link -->
        <li class="has-sub">
          <a href="#">Library ▼</a>
          <ul class="submenu">
            <li><a href="#randomBooks">Random Books</a></li>
            <li><a href="knowledge.html">All Books</a></li>
          </ul>
        </li>

        <li><a href="#cover-form">Sadaqah Jariyah</a></li>

        <li class="has-sub">
          <a href="#">More ▼</a>
          <ul class="submenu">
            <li><a href="reciters.html">Qur'an Recitations</a></li>
            <li><a href="poem.html">Poems</a></li>
            <li><a href="request.html">Contact Me / Request</a></li>
          </ul>
        </li>
      </ul>
    </nav>

    <div class="utility">
      <button id="darkToggle" title="Toggle dark mode">🌙</button>
    </div>

    <button id="hamburgerBtn" class="hamburger" aria-label="Toggle menu">
      <span></span>
      <span></span>
      <span></span>
    </button>
  </header>

  <!-- Hero Section -->
  <section id="hero" class="hero">
    <div class="hero-content container">
      <h1>Books of 'Ilm</h1>
      <p>Your free PDF library of authentic Islamic knowledge.</p>
      <a href="knowledge.html" class="btn btn-cta">See Full Library</a>
    </div>
  </section>

  <!-- Random Books Section -->
  <section id="randomBooks" class="grid-section container alt">
    <div class="section-header">
      <h2>📚 Random Books</h2>
      <button id="refreshRandom" title="Surprise Me">🔄</button>
    </div>
    <p style="font-size: 1.1rem;"><b>For a closer look, click the image to preview 🔍</b></p>
    <div class="grid" id="jsonBookGrid">
      <!-- JSON-loaded books will appear here -->
    </div>

  </section>
  <section id="cover-form">
    <h2>Your support keeps this library free and accessible for everyone💖</h2>
    <form id="user-form" action="https://api.web3forms.com/submit" method="POST">
      <input type="hidden" name="access_key" value="87365590-ed8d-489b-9d87-6c4eea8b49b2">
      <input type="hidden" name="from_name" value="Books of 'Ilm Donation">

      <div class="field-group">
        <input type="text" id="name" name="name" required placeholder=" " />
        <label for="name">Full Name</label>
      </div>

      <input type="hidden" id="ipAddress" name="ipAddress">
      <input type="checkbox" name="botcheck" class="hidden" style="display: none;">

      <div class="field-group">
        <input type="email" id="email" name="email" required placeholder=" " />
        <label for="email">Email Address</label>
      </div>

      <div class="field-group">
        <input type="tel" id="phone" name="phone" placeholder="+1234567890" pattern="^\+(?:[0-9] ?){6,14}[0-9]$"
          required>
        <label for="phone">Phone Number</label>
      </div>

      <div class="field-group">
        <textarea id="message" name="message" rows="4" placeholder=" "></textarea>
        <label for="message">Message (optional)</label>
      </div>

      <div class="h-captcha" data-captcha="true" data-theme="dark" data-onload="myFunction"></div>
      <button type="submit" class="btn">Continue</button>

    </form>
  </section>



  <!-- Your original DONATE SECTION (initially hidden) -->
  <section id="donate" class="donate-section container" style="display: none;">
    <!-- Donate Section -->
    <section id="donate" class="donate-section container">

      <p style="
  text-align: center;
  font-style: italic;
  font-size: 1.15rem;
  font-weight: 500;
  color: var(--fg);
  background: var(--alt);
  padding: 1em 1.2em;
  margin-bottom: 1.5em;
  border-radius: 10px;
  border-left: 4px solid var(--accent);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
"> <span style="color: var(--accent); font-weight: 600;">Prophet Muhammad (ﷺ) said,</span>
        "The deeds are considered by the intentions, and a person will get the reward according to his intention...<span
          style="color: var(--muted); font-size: 0.95rem;"> (Sahih Bukhari & Muslim)</span>
      </p>

      <!--
  <h2 style="font-size: 2.2rem; margin-bottom: 0.5em;"><span
      style="color: var(--surface); background: var(--accent); padding: 0.2em 0.6em; border-radius: 8px;"> Please choose a
    method
    below to contribute : </span> </h2>

  <div class="donate-grid">
    <div class="donate-card paypal">
      <img src="images/paypal.svg" alt="PayPal" />
      <h3>PayPal</h3>
      <a href="https://www.paypal.com/donate?hosted_button_id=YOUR_ID" target="_blank" class="btn">
        Donate via PayPal
      </a>
    </div>
    <div class="donate-card upi">
      <img src="images/upi.svg" alt="UPI" />
      <h3>UPI (India)</h3>
      <img src="images/upi-qr.png" alt="Scan UPI" class="qr" />
      <p>Scan with Google Pay, PhonePe, etc.</p>
    </div>
    <div class="donate-card bank">
      <img src="images/bank.svg" alt="Bank" />
      <h3>Bank Transfer</h3>
      <ul>
        <li><strong>Account:</strong> Books of 'Ilm</li>
        <li><strong>No:</strong> </li>
        <li><strong>IFSC:</strong> </li>
        <li><strong>Bank:</strong> </li>
      </ul>
    </div>

  </div> -->
    </section>
  </section>



  <!-- Floating Buttons -->
  <button id="feedbackBtn" class="floating-feedback" title="Report Issue / Request Book">
    📝
  </button>
  <button id="backToTop" class="floating-top" title="Back to Top">
    ↑
  </button>

  <!-- Footer -->
  <footer class="container">
    <p>&copy; 2025 Books of 'Ilm. All rights reserved.</p>
  </footer>
  <!-- Fullscreen Thumbnail Preview Overlay -->
  <div id="previewOverlay" class="thumbnail-modal">
    <span class="close-preview" aria-label="Close preview">×</span>
    <img src="" alt="Expanded Preview" class="preview-image" />
  </div>
  <script>
    var loader = document.getElementById("preloader");
    window.addEventListener("load", function () {
      loader.style.display = "none";
    })
  </script>

  <script>

    document.addEventListener("contextmenu", function (e) {
      e.preventDefault();
    });

    document.addEventListener("keydown", function (e) {
      if (e.ctrlKey && e.shiftKey && (e.key === "I" || e.key === "J" || e.key === "C") || e.key === "F12") {
        e.preventDefault();
      }
    });

  </script>
  <script>
    // ===============================
    // 1. ON-SCROLL FADE-IN OBSERVER
    // ===============================
    const observer = new IntersectionObserver((entries, obs) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
          obs.unobserve(entry.target);
        }
      });
    }, {
      threshold: 0.1
    });

    // ===============================
    // 2. SHUFFLE HELPER
    // ===============================
    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    // ===============================
    // 3. INITIALIZATION
    // ===============================
    document.addEventListener('DOMContentLoaded', () => {
      //–– Modal Elements & Utilities ––
      const modal = document.getElementById('previewOverlay');
      const previewImg = modal.querySelector('.preview-image');
      const closeBtn = modal.querySelector('.close-preview');

      function openModal(src) {
        previewImg.src = src;
        modal.style.display = 'flex';
        document.body.style.overflow = 'hidden';
      }

      function closeModal() {
        modal.style.display = 'none';
        previewImg.src = '';
        document.body.style.overflow = '';
      }

      // close when clicking outside the image
      modal.addEventListener('click', closeModal);

      // close when clicking ✕ (but don’t bubble)
      closeBtn.addEventListener('click', e => {
        e.stopPropagation();
        closeModal();
      });

      // prevent accidental close when clicking the image
      previewImg.addEventListener('click', e => {
        e.stopPropagation();
      });

      // close on Escape key
      window.addEventListener('keydown', e => {
        if (
          e.key === 'Escape' &&
          getComputedStyle(modal).display !== 'none'
        ) {
          closeModal();
        }
      });

      //–– Load & Render Random Books ––
      function loadRandomBooks(count = 10) {
        fetch('public/books.json')
          .then(res => res.json())
          .then(books => {
            const container = document.getElementById('jsonBookGrid');
            container.innerHTML = '';

            shuffleArray(books)
              .slice(0, count)
              .forEach(book => {
                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `
              <div class="thumbnail-wrapper">
                <div class="loader-container">
                  <div class="box"></div>
                  <div class="box"></div>
                  <div class="box"></div>
                  <div class="box"></div>
                </div>
                <img class="card-thumbnail" alt="${book.name}" />
              </div>
              <h3>${book.name}</h3>
              <p>Size: ${book.size}</p>
              <a href="${book.file}" class="btn" download>Download PDF</a>
            `;
                container.appendChild(card);

                // thumbnail preloader
                const img = card.querySelector('.card-thumbnail');
                const loader = card.querySelector('.loader-container');
                img.style.opacity = '0';
                loader.style.display = 'flex';
                img.src = book.thumb;

                img.onload = () => {
                  loader.style.display = 'none';
                  img.style.opacity = '1';
                };
                img.onerror = () => {
                  loader.style.display = 'none';
                  img.src = 'public/thumbnails/placeholder.png';
                  img.style.opacity = '1';
                };

                // fade-in on scroll
                observer.observe(card);

                // bind preview click
                img.style.cursor = 'zoom-in';
                img.addEventListener('click', () => openModal(img.src));
              });
          })
          .catch(err => console.error('Error loading books:', err));
      }

      //–– 4.a. Load & Refresh Random Books
      loadRandomBooks();
      document.getElementById('refreshRandom')
        .addEventListener('click', () => loadRandomBooks());

      //–– 4.b. DARK MODE MEMORY + TOGGLE
      const darkToggle = document.getElementById('darkToggle');
      const iconMap = { dark: '☀️', light: '🌙' };
      if (localStorage.getItem('dark') === 'true') {
        document.body.classList.add('dark');
      }
      function updateDarkIcon() {
        const isDark = document.body.classList.contains('dark');
        darkToggle.textContent = isDark ? iconMap.dark : iconMap.light;
      }
      updateDarkIcon();
      darkToggle.addEventListener('click', () => {
        const isDark = document.body.classList.toggle('dark');
        localStorage.setItem('dark', isDark);
        updateDarkIcon();
      });

      //–– 4.c. BACK-TO-TOP BUTTON
      const backBtn = document.getElementById('backToTop');
      window.addEventListener('scroll', () => {
        backBtn.style.display = window.scrollY > 300 ? 'flex' : 'none';
      });
      backBtn.addEventListener('click', () => {
        window.scrollTo({ top: 0, behavior: 'smooth' });
      });

      //–– 4.d. FEEDBACK / REQUEST BUTTON
      document.getElementById('feedbackBtn')
        .addEventListener('click', () => {
          window.location.href = 'request.html';
        });

      //–– 4.e. HAMBURGER MENU TOGGLE
      const hamburger = document.getElementById('hamburgerBtn');
      const menu = document.querySelector('.menu');
      hamburger.addEventListener('click', () => {
        hamburger.classList.toggle('active');
        menu.classList.toggle('open');
      });
      //–– 4.f. SMOOTH SCROLL WITH OFFSET FOR INTERNAL ANCHORS
      document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
          e.preventDefault();
          const target = document.querySelector(this.getAttribute('href'));
          if (target) {
            const offset = window.innerWidth < 768 ? 120 : 100; // Adjust for mobile vs desktop
            const top = target.getBoundingClientRect().top + window.scrollY - offset;

            window.scrollTo({ top, behavior: 'smooth' });
          }

          // Close mobile menu (if open)
          hamburger.classList.remove('active');
          menu.classList.remove('open');
        });
      });


      //–– REVEAL DONATION SECTION AFTER FORM SUBMISSION ––
      const coverForm = document.getElementById('cover-form');
      const userForm = document.getElementById('user-form');
      const donateSection = document.getElementById('donate');

      if (userForm) {
        userForm.addEventListener('submit', e => {
          e.preventDefault();
          // Optional: collect form data or validate

          // Hide cover form and reveal donation section
          coverForm.style.display = 'none';
          donateSection.style.display = 'block';
          donateSection.scrollIntoView({ behavior: 'smooth' });
        });
      }


      //–– 4.h. RIPPLE EFFECT ON BUTTONS
      document.querySelectorAll('.btn').forEach(btn => {
        btn.addEventListener('click', e => {
          const circle = document.createElement('span');
          circle.className = 'ripple';
          circle.style.left = `${e.offsetX}px`;
          circle.style.top = `${e.offsetY}px`;
          btn.appendChild(circle);
          setTimeout(() => circle.remove(), 600);
        });
      });

      //–– 4.i. AUTO-EXPAND TEXTAREAS ON INPUT
      document.querySelectorAll('#cover-form textarea').forEach(area => {
        area.addEventListener('input', () => {
          area.style.height = 'auto';
          area.style.height = `${area.scrollHeight}px`;
        });
      });


    });

  </script>
  <script src="https://web3forms.com/client/script.js" async defer></script>
  <script>
    async function getIpAddress() {
      try {
        const response = await fetch('https://api.ipify.org?format=json');
        const data = await response.json();
        document.getElementById('ipAddress').value = data.ip;
      } catch (error) {
        console.error('Error fetching IP address:', error);
      }
    }
    window.onload = getIpAddress;
  </script>
  <script>
    const form = document.getElementById('user-form');
    const cover = document.getElementById('cover-form');
    const donate = document.getElementById('donate');

    form.addEventListener('submit', async e => {
      e.preventDefault();

      // 1) Validate hCaptcha
      const token = form.querySelector('textarea[name="h-captcha-response"]')?.value;
      if (!token) {
        return alert('Please complete the captcha');
      }

      // 2) Build FormData
      const data = new FormData(form);

      try {
        // 3) Send via fetch without auto‐following redirects
        const res = await fetch('https://api.web3forms.com/submit', {
          method: 'POST',
          body: data,
          redirect: 'manual'
        });

        // 4) 302 redirect or JSON success → reveal donation
        if (res.status === 302) {
          return handleSuccess();
        }
        const json = await res.json();
        if (json.success) {
          return handleSuccess();
        }

        // 5) API flagged an error
        return handleError(json.message);

      } catch (err) {
        // 6) Parsing HTML or network hiccup → still treat as success
        console.warn('Fetch/parse error, assuming success:', err);
        return handleSuccess();
      }
    });

    // On successful submission
    function handleSuccess() {
      // Native browser alert
      alert('✅ Jazakallah Khair');
      // Hide cover, show donate UI
      cover.style.display = 'none';
      donate.style.display = 'block';
      donate.scrollIntoView({ behavior: 'smooth' });
    }

    // On API-reported error
    function handleError(msg) {
      alert('Submission failed: ' + (msg || 'Unknown error'));
    }
  </script>


</body>

</html>